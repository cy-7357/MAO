<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAOMAO-æœƒå“¡ä¸­å¿ƒ</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/mao.css">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet">
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--maocolor02);
            color: var(--maocolor05);
            font-family: "Zen Maru Gothic", serif;
            overflow-x: hidden;
        }

        #s02 .navbar.bg-01 {
            background-color: var(--maocolor01, #D8C3A5) !important;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        #s02_reg_btn {
            background-color: var(--maocolor03);
            color: var(--maocolor05);
        }

        #s02_reg_btn:hover {
            background-color: var(--maocolor04);
        }

        #s02_login_btn {
            background-color: var(--maocolor01);
            color: var(--maocolor05);
        }

        #s02_login_btn:hover {
            background-color: var(--maocolor04);
        }



        #s02_username_text {
            white-space: nowrap;
        }



        .btn:hover {
            background-color: var(--maocolor04);
            color: #FFFFFF;
        }

        #s02_logout_btn {
            background-color: var(--maocolor02);
            color: var(--maocolor05);
            padding: 0.5rem 1rem;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        #s02_logout_btn:hover {
            background-color: var(--maocolor04);
            color: #FFFFFF;
            border-color: var(--maocolor04);
        }

        #navbarDropdownMenuAvatar img {
            object-fit: cover;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            border: 1px solid var(--maocolor06);
        }

        .navbar-brand {
            color: var(--maocolor05);
            font-weight: bold;
        }

        .navbar-brand:hover {
            color: var(--maocolor04);
        }

        .navbar-brand i {
            color: var(--maocolor05);
        }

        .nav-link,
        .dropdown-toggle {
            color: var(--maocolor05);
        }

        .nav-link:hover,
        .nav-link:focus,
        .dropdown-toggle:hover,
        .dropdown-toggle:focus {
            color: var(--maocolor04);
        }

        .nav-link.active {
            color: var(--maocolor04);
            background-color: rgba(201, 168, 141, 0.2);
        }

        .dropdown-menu {
            background-color: var(--maocolor02);
            border: 1px solid var(--maocolor06);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 0.5rem 0;
        }

        .dropdown-menu.cart-dropdown {
            min-width: 450px;
        }

        .dropdown-item {
            color: var(--maocolor05);
            padding: 0.5rem 1rem;
        }

        .dropdown-item:hover,
        .dropdown-item:focus {
            background-color: var(--maocolor04);
            color: var(--maocolor08);
        }

        .dropdown-item-text {
            color: var(--maocolor05);
        }

        .dropdown-item.active,
        .dropdown-item:active {
            background-color: var(--maocolor04);
            color: var(--maocolor08);
        }

        #navbarDropdownCart {
            position: relative;
            padding: 0.5rem 1rem;
            color: var(--maocolor05);
        }

        #navbarDropdownCart i {
            color: var(--maocolor05);
        }

        #navbarDropdownCart:hover i {
            color: var(--maocolor04);
        }

        #cart-count {
            position: absolute;
            top: 0;
            right: 0;
            font-size: 0.75rem;
            padding: 0.2rem 0.4rem;
            background: var(--maocolor04);
            color: #FFFFFF;
            border-radius: 50%;
        }

        .dropdown-item-text .btn.view-cart-btn {
            background: var(--maocolor03);
            color: var(--maocolor05);
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 10px;
            transition: background 0.3s ease-in-out, transform 0.3s ease-in-out;
        }

        .dropdown-item-text .btn.view-cart-btn:hover {
            background: var(--maocolor04);
            color: #FFFFFF;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(201, 168, 141, 0.3);
        }

        .cart-item-img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
            border: 1px solid var(--maocolor06);
        }

        .cart-item {
            border-bottom: 1px solid var(--maocolor06);
            padding: 10px 0;
        }

        .cart-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cart-controls .input-group {
            width: 100px;
        }

        .quantity-input {
            width: 50px;
            height: 32px;
            background-color: var(--maocolor08);
            border: 1px solid var(--maocolor06);
            color: var(--maocolor05);
            text-align: center;
            font-size: 1rem;
            padding: 0;
            border-radius: 4px;
        }

        .btn-outline-secondary {
            border: 1px solid var(--maocolor06);
            color: var(--maocolor05);
            background-color: var(--maocolor08);
            padding: 0.25rem 0.5rem;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .btn-outline-secondary:hover {
            background-color: var(--maocolor04);
            color: #FFFFFF;
            border-color: var(--maocolor04);
        }

        .btn-link.text-danger {
            font-size: 1rem;
            line-height: 1;
            transition: color 0.3s ease;
        }

        .btn-link.text-danger:hover {
            color: #dc3545 !important;
        }



        .modern-footer {
            background-color: var(--maocolor02);
            border-top: 1px solid var(--maocolor06);
            position: relative;
            overflow: hidden;
        }

        .modern-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(201, 168, 141, 0.1), rgba(0, 0, 0, 0));
            z-index: 1;
        }

        .footer-content {
            position: relative;
            z-index: 2;
        }

        .footer-logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--maocolor05);
            text-decoration: none;
        }

        .footer-title {
            color: var(--maocolor05);
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            position: relative;
            display: inline-block;
        }

        .footer-title::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -5px;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--maocolor04), transparent);
        }

        .contact-info {
            list-style: none;
            padding: 0;
        }

        .contact-info li {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--maocolor05);
        }

        .contact-info i {
            color: var(--maocolor04);
            width: 20px;
        }

        .social-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--maocolor08);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--maocolor05);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-icon:hover {
            transform: translateY(-3px);
            background: var(--maocolor04);
            color: var(--maocolor08);
        }

        .quick-links {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            padding: 0;
            list-style: none;
        }

        .quick-links a {
            color: var(--maocolor05);
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .quick-links a:hover {
            color: var(--maocolor04);
            transform: translateX(5px);
        }

        .quick-links a::before {
            content: 'â†’';
            opacity: 0;
            transition: all 0.3s ease;
        }

        .quick-links a:hover::before {
            opacity: 1;
        }

        .newsletter-input {
            border: none;
            padding: 0.8rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            background: var(--maocolor08);
            color: var(--maocolor05);
            width: 100%;
        }

        .btn-subscribe {
            background: var(--maocolor03);
            border: none;
            box-shadow: 0 2px 10px rgba(201, 168, 141, 0.2);
            padding: 0.8rem 2rem;
            border-radius: 10px;
            transition: all 0.3s ease;
            color: var(--maocolor05);
            width: 100%;
        }

        .btn-subscribe:hover {
            background: var(--maocolor04);
            color: var(--maocolor08);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(201, 168, 141, 0.3);
        }

        .footer-bottom {
            background: var(--maocolor02);
            border-top: 1px solid var(--maocolor06);
        }

        .footer-bottom p {
            margin: 0;
            color: var(--maocolor07);
        }

        .footer-bottom a {
            color: var(--maocolor04);
            text-decoration: none;
        }

        .footer-bottom a:hover {
            text-decoration: underline;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--maocolor03), var(--maocolor04));
            color: #FFFFFF;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
            z-index: 1000;
        }

        .back-to-top:hover {
            background: var(--maocolor04);
            box-shadow: 0 6px 20px rgba(201, 168, 141, 0.3);
            transform: translateY(-5px);
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }


        .dropdown-item-text .btn.view-cart-btn {
            background: var(--maocolor03);
            color: var(--maocolor05);
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 10px;
            transition: background 0.3s ease-in-out, transform 0.3s ease-in-out;
        }

        .dropdown-item-text .btn.view-cart-btn:hover {
            background: var(--maocolor04);
            color: #FFFFFF;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(201, 168, 141, 0.3);
        }

        #profile {
            background-color: var(--maocolor02);
            padding: 80px 20px 40px;
        }

        #profile .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        #profile h2 {
            color: var(--maocolor05);
            text-align: center;
            margin-bottom: 2rem;
        }

        .profile-card {
            max-width: 300px;
            min-height: 350px;
            background-color: var(--maocolor08);
            border: 1px solid var(--maocolor06);
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .profile-img {
            width: 120px;
            height: 120px;
            border: 4px solid var(--maocolor03);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            object-fit: cover;
        }

        .card-body {
            color: var(--maocolor05);
        }

        .card-title {
            font-size: 1.5rem;
        }

        .card-text {
            font-size: 1.1rem;
        }

        .small-text {
            font-size: 0.85rem;
            color: var(--maocolor06);
        }

        .btn-warning {
            background-color: var(--maocolor03);
            border-color: var(--maocolor06);
            color: var(--maocolor05);
        }

        .btn-warning:hover {
            background-color: var(--maocolor04);
            color: var(--maocolor08);
        }

        .discount-card {
            max-width: 550px;
            min-height: 350px;
            background-color: var(--maocolor08);
            border: 1px solid var(--maocolor06);
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .discount-img {
            width: 100%;
            max-width: 250px;
            height: auto;
        }

        .discount-content {
            background-color: rgba(158, 139, 126, 0.1);
            border: 1px solid var(--maocolor06);
            border-radius: 10px;
        }

        .discount-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--maocolor04);
        }

        .modal-content {
            background-color: var(--maocolor08);
            border: 1px solid var(--maocolor06);
        }

        .modal-header {
            background-color: var(--maocolor01);
            color: var(--maocolor05);
            border-bottom: 1px solid var(--maocolor03);
        }

        .modal-title {
            color: var(--maocolor05);
        }

        .modal-body {
            background-color: var(--maocolor02);
        }

        .form-label {
            color: var(--maocolor05);
        }

        .form-control,
        .form-select {
            background-color: var(--maocolor08);
            border: 1px solid var(--maocolor06);
            color: var(--maocolor05);
        }

        .form-control:disabled {
            background-color: var(--maocolor09);
            color: var(--maocolor07);
        }

        .form-control:focus,
        .form-select:focus {
            border-color: var(--maocolor04);
            box-shadow: 0 0 0 0.2rem rgba(201, 168, 141, 0.25);
        }

        .form-control::placeholder {
            color: var(--maocolor07);
        }

        .valid-feedback {
            color: var(--maocolor05);
        }

        .invalid-feedback {
            color: #E94F4F;
        }

        .modal-footer {
            border-top: 1px solid var(--maocolor06);
        }

        .btn.btn-secondary {
            background-color: var(--maocolor07);
            border-color: var(--maocolor06);
            color: var(--maocolor05);
        }

        .btn.btn-secondary:hover {
            background-color: var(--maocolor04);
            color: var(--maocolor08);
        }

        #order-history {
            background-color: var(--maocolor02);
            padding: 40px 20px;
        }

        #order-history .accordion-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        #order-history h2 {
            color: var(--maocolor05);
            text-align: center;
            margin-bottom: 2rem;
        }

        .accordion-item {
            background-color: var(--maocolor08);
            border: 1px solid var(--maocolor06);
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .accordion-item:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .accordion-button {
            color: var(--maocolor05);
            background-color: var(--maocolor08);
            padding: 20px 25px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .accordion-button:not(.collapsed) {
            color: var(--maocolor04);
            background-color: var(--maocolor02);
            box-shadow: none;
        }

        .accordion-button:focus {
            box-shadow: none;
            border-color: rgba(201, 168, 141, 0.25);
        }

        .accordion-button::after {
            background-image: none;
            content: '\f107';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 1.2rem;
            color: var(--maocolor07);
            transition: transform 0.3s ease;
        }

        .accordion-button:not(.collapsed)::after {
            transform: rotate(-180deg);
            color: var(--maocolor04);
        }

        .accordion-body {
            padding: 20px 25px;
            color: var(--maocolor05);
            background-color: var(--maocolor08);
        }

        .feature-icon {
            margin-right: 12px;
            color: var(--maocolor04);
            font-size: 1.2rem;
        }

        .badge-custom {
            margin-left: 10px;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 500;
            font-size: 0.8rem;
        }

        .progress {
            height: 8px;
            margin-top: 15px;
            border-radius: 4px;
            background-color: var(--maocolor07);
        }

        .list-group-item {
            border: none;
            padding: 10px 0;
            display: flex;
            align-items: center;
            color: var(--maocolor05);
        }

        .status-icon {
            margin-right: 10px;
            color: var(--maocolor04);
        }

        .order-summary {
            background-color: var(--maocolor08);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .order-actions {
            border-top: 1px dashed var(--maocolor06);
            padding-top: 1rem;
            text-align: right;
        }

        .table-responsive {
            border-radius: 8px;
            overflow: hidden;
        }

        .table {
            margin-bottom: 0;
        }

        .table th {
            background-color: var(--maocolor01);
            color: var(--maocolor05);
            font-weight: 600;
        }

        .table tfoot tr:last-child td {
            border-bottom: 2px solid var(--maocolor04);
            font-size: 1.1rem;
        }

        .table-hover tbody tr:hover {
            background-color: rgba(201, 168, 141, 0.1);
        }

        @media (max-width: 768px) {
            .order-summary .row>div {
                margin-bottom: 1rem;
            }

            .table-responsive {
                font-size: 0.9rem;
            }
        }

        @media (min-width: 992px) {
            .navbar-collapse {
                display: flex;
                justify-content: space-between;
            }

            .navbar-nav.me-auto {
                flex-grow: 0;
            }

            .user-menu-container {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                margin-left: auto;
            }

            .dropdown.order-2.order-lg-1,
            .dropdown.order-1.order-lg-2 {
                order: initial;
            }

            #control_panel_btn .dropdown-menu,
            #s02_avatar_section .dropdown-menu {
                right: 0;
                left: auto;
            }
        }

        @media (max-width: 991.98px) {
            .navbar-collapse {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
            }

            .user-menu-container {
                display: flex !important;
                flex-direction: row;
                align-items: center;
                gap: 0.5rem;
                width: 100%;
                justify-content: flex-start;
                margin-top: 0.5rem;
            }

            .dropdown-menu {
                left: 0 !important;
                right: auto !important;
            }

            .dropdown-menu {
                left: 0 !important;
                right: auto !important;
            }

            .dropdown-menu.backend-dropdown,
            .dropdown-menu.profile-dropdown {
                min-width: 0;
                width: auto;
            }

            #navbarDropdownMenuControlPanel,
            #navbarDropdownMenuAvatar,
            #navbarDropdownCart {
                padding: 0.3rem 0.5rem;
            }

            #cart-count {
                top: -5px;
                right: -5px;
            }

            #s02_reg_btn,
            #s02_login_btn {
                padding: 0.3rem 0.8rem;
                font-size: 0.9rem;
            }

            .dropdown.ms-2 {
                margin-left: 0;
            }

            #products-section>.row {
                flex-direction: column;
            }

            #cart-sidebar {
                margin-top: 0;
                padding: 0 15px;
            }

            .fixed-cart-width {
                max-width: 100%;
            }

            .cart-card {
                margin-bottom: 30px;
                border: 2px solid var(--maocolor06);
                padding: 20px;
            }
        }

        @media (min-width: 768px) and (max-width: 991.98px) {
            .products-container {
                width: 100%;
            }

            .col-md-4.d-flex.justify-content-md-end {
                justify-content: flex-end !important;
            }
        }

        @media (max-width: 767.98px) {
            .cart-controls .input-group {
                width: 90px;
            }

            .quantity-input {
                width: 40px;
                height: 28px;
                font-size: 0.9rem;
            }

            .btn-outline-secondary {
                height: 28px;
                font-size: 0.9rem;
                padding: 0.2rem 0.4rem;
            }

            .dropdown-menu.backend-dropdown,
            .dropdown-menu.profile-dropdown {
                min-width: 0;
                width: auto;
                padding: 0.5rem;
            }

            .quick-links {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 575.98px) {
            .user-menu-container {
                gap: 0.3rem;
            }

            #navbarDropdownMenuControlPanel,
            #navbarDropdownMenuAvatar,
            #navbarDropdownCart {
                padding: 0.2rem 0.4rem;
            }

            #s02_reg_btn,
            #s02_login_btn {
                padding: 0.2rem 0.6rem;
                font-size: 0.8rem;
            }

            #cart-count {
                top: -3px;
                right: -3px;
                font-size: 0.65rem;
                padding: 0.15rem 0.3rem;
            }

            .cart-controls .input-group {
                width: 80px;
            }

            .quantity-input {
                width: 35px;
                height: 26px;
                font-size: 0.85rem;
            }

            .btn-outline-secondary {
                height: 26px;
                font-size: 0.85rem;
                padding: 0.15rem 0.35rem;
            }

            #products-section {
                padding: 80px 10px 20px;
            }

            #cart-sidebar {
                padding: 0 10px;
            }

            .btn-outline-primary {
                padding: 0.3rem 1rem;
            }
        }
    </style>
</head>

<body>
    <div id="app">
        <section id="s02" class="bg-01">
            <div class="container">
                <nav class="navbar navbar-expand-lg fixed-top bg-01">
                    <div class="container-fluid">
                        <a class="navbar-brand" href="#"><i class="fa-solid fa-paw fa-2x"></i></a>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                <li class="nav-item"><a class="nav-link" href="Mao-index_v1.html#s03">é¦–é </a></li>
                                <li class="nav-item"><a class="nav-link" href="Mao-index_v1.html#s04">é—œæ–¼æ¯›æ¯›</a></li>
                                <li class="nav-item"><a class="nav-link" href="Mao-index_v1.html#s05">å•†å“å±•ç¤º</a></li>
                                <li class="nav-item"><a class="nav-link" href="Mao-index_v1.html#s07">ç§Ÿè³ƒæµç¨‹</a></li>
                                <li class="nav-item"><a class="nav-link" href="Mao-index_v1.html#s06">Q&A</a></li>
                            </ul>
                            <div class="d-flex align-items-center user-menu-container d-none" id="s02_login_show">
                                <div class="dropdown" id="control_panel_btn">
                                    <a class="nav-link dropdown-toggle fw-500 tx-08 me-2" href="#"
                                        id="navbarDropdownMenuAdminPanel" role="button" data-bs-toggle="dropdown"
                                        aria-expanded="false">å¾Œå°ç®¡ç†</a>
                                    <ul class="dropdown-menu dropdown-menu-end backend-dropdown"
                                        aria-labelledby="navbarDropdownMenuAdminPanel">
                                        <li><a class="dropdown-item" href="mao-users-control-panel_v1.html"
                                                target="_blank">Member - Control</a></li>
                                        <li><a class="dropdown-item" href="mao-products-R-control-panel_v1.html"
                                                target="_blank">Product - Control</a></li>
                                        <li><a class="dropdown-item" href="mao-orders-control-panel_v1.html"
                                                target="_blank">Order - Control</a></li>
                                        <li><a class="dropdown-item" href="mao-chart-control-panel_v1.html"
                                                target="_blank">Chart - Control</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown" id="member_area_btn">
                                    <a class="nav-link dropdown-toggle fw-500 tx-08 me-2" href="#"
                                        id="navbarDropdownMenuMemberArea" role="button" data-bs-toggle="dropdown"
                                        aria-expanded="false">æœƒå“¡å°ˆå€</a>
                                    <ul class="dropdown-menu dropdown-menu-end backend-dropdown"
                                        aria-labelledby="navbarDropdownMenuMemberArea">
                                        <li><a class="dropdown-item" href="20250213-taipeiHotel.html"
                                                target="_blank">Taipei Hotel - Card</a></li>
                                        <li><a class="dropdown-item" href="SPA-member-control-panel-maskmap_v1.html"
                                                target="_blank">Mask - map</a></li>
                                        <li><a class="dropdown-item" href="SPA-member-control-panel-youbikemap_v1.html"
                                                target="_blank">Youbike - map</a></li>
                                        <li><a class="dropdown-item" href="SPA-member-control-panel-hotelmap_v1.html"
                                                target="_blank">Hotel - map</a></li>
                                        <li><a class="dropdown-item" href="20250213-taipeiHotel-map.html"
                                                target="_blank">Taipei Hotel - map</a></li>
                                        <li><a class="dropdown-item" href="20250211-control-panel.html"
                                                target="_blank">Member - Chart</a></li>
                                        <li><a class="dropdown-item" href="20250214-taipeiHotel-chart.html"
                                                target="_blank">Taipei Hotel - Chart</a></li>
                                        <li><a class="dropdown-item" href="SPA-member-control-panel-hotel_C_v1.html"
                                                target="_blank">hotel_C - Chart</a></li>
                                        <li><a class="dropdown-item" href="20250218-taichung-parking-chart.html"
                                                target="_blank">Taichung Parking - Chart</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown" id="s02_avatar_section">

                                    <a class="dropdown-toggle d-flex align-items-center hidden-arrow" href="#"
                                        id="navbarDropdownMenuAvatar" role="button" aria-expanded="false"
                                        data-bs-toggle="dropdown">
                                        <img :src="user.Userphoto ? 'uploads/users/' + user.Userphoto : 'https://mdbcdn.b-cdn.net/img/new/avatars/2.webp'"
                                            class="rounded-circle" height="40" width="40" alt="User Avatar"
                                            loading="lazy" />
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end profile-dropdown"
                                        aria-labelledby="navbarDropdownMenuAvatar">
                                        <li>
                                            <a class="dropdown-item h5 fw-500" href="#">
                                                <span id="s02_username_showtext">
                                                    <span class="d-none" id="s02_level_text"></span>
                                                    <br>
                                                    <span class="d-none mt-3" id="s02_username_text">{{ user.Username ||
                                                        'XXX' }}</span>
                                                </span>
                                            </a>
                                        </li>
                                        <li><a class="dropdown-item active" href="mao-profile.html">æœƒå“¡ä¸­å¿ƒ</a></li>
                                        <li><a class="dropdown-item" href="#">
                                                <button class="btn bg-02 tx-05" @click="logout"
                                                    id="s02_logout_btn">ç™»å‡º</button></a>
                                        </li>
                                    </ul>
                                </div>
                                <button class="btn bg-02 me-2" data-bs-toggle="modal" data-bs-target="#registerModal"
                                    id="s02_reg_btn">è¨»å†Š</button>
                                <button class="btn bg-03 tx-05" data-bs-toggle="modal" data-bs-target="#loginModal"
                                    id="s02_login_btn">ç™»å…¥</button>
                                <div class="cart-wrapper">
                                    <div class="dropdown ms-2" v-if="cartItems.length > 0 || true">
                                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownCart"
                                            role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="fas fa-shopping-cart fa-lg"></i>
                                            <span class="badge bg-danger rounded-pill" id="cart-count">{{
                                                cartItems.length }}</span>
                                        </a>
                                        <ul class="dropdown-menu dropdown-menu-end cart-dropdown"
                                            aria-labelledby="navbarDropdownCart">
                                            <li class="dropdown-item-text text-center">
                                                <h6 class="fw-bold">è³¼ç‰©è»Š</h6>
                                            </li>
                                            <li>
                                                <hr class="dropdown-divider">
                                            </li>
                                            <li v-if="cartItems.length === 0" class="dropdown-item-text px-3 py-2">
                                                <p class="mb-0 text-muted">æ‚¨çš„è³¼ç‰©è»Šç›®å‰æ˜¯ç©ºçš„</p>
                                            </li>
                                            <li v-for="item in cartItems" :key="item.Product_id"
                                                class="dropdown-item-text px-3 py-2 cart-item">
                                                <div class="d-flex align-items-center">
                                                    <img :src="'uploads/' + item.Photo" alt="å•†å“åœ–ç‰‡"
                                                        class="cart-item-img me-2">
                                                    <div class="me-2">
                                                        <strong>{{ item.Pname }}</strong>
                                                        <span class="d-block">{{ item.Price }} å…ƒ/å¤©</span>
                                                    </div>
                                                    <div class="cart-controls ms-auto d-flex align-items-center">
                                                        <div class="input-group input-group-sm me-2">
                                                            <button class="btn btn-outline-secondary" type="button"
                                                                @click="decreaseQuantity(item)">-</button>
                                                            <input type="text"
                                                                class="form-control text-center quantity-input"
                                                                v-model="item.quantity" readonly>
                                                            <button class="btn btn-outline-secondary" type="button"
                                                                @click="increaseQuantity(item)">+</button>
                                                        </div>
                                                        <button class="btn btn-link text-danger p-0"
                                                            @click="removeFromCart(item.Product_id)" title="ç§»é™¤">
                                                            <i class="fas fa-trash-alt"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="dropdown-item-text text-center mt-2" v-if="cartItems.length > 0">
                                                <a href="mao-products.html" class="btn btn-sm view-cart-btn">æŸ¥çœ‹è³¼ç‰©è»Š</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
        </section>

        <section id="profile" class="py-5 mt-5 pt-5">
            <div class="container">
                <h2 class="text-center mb-4 fw-bold">æœƒå“¡ä¸­å¿ƒ</h2>
                <div class="row">
                    <div class="col-md-4 mb-4 d-flex justify-content-center justify-content-md-end">
                        <div class="card profile-card px-5">
                            <div class="card-body text-center">
                                <div class="d-flex justify-content-center">
                                    <img :src="user.Userphoto ? 'uploads/users/' + user.Userphoto + '?t=' + Date.now() : 'https://mdbcdn.b-cdn.net/img/new/avatars/2.webp'"
                                        alt="User Photo" class="rounded-circle profile-img mb-2 mt-2">
                                </div>
                                <h3 class="card-title mb-1" v-if="user.Username">{{ user.Username || 'æœªæä¾›' }}</h3>
                                <p class="card-text text-muted mb-1">{{ user.Email || 'æœªæä¾›' }}</p>
                                <p class="card-text mb-1">{{ getUserLevel(user.Level) || 'æœªæä¾›' }}</p>
                                <p class="card-text mb-2">å±…ä½åœ°: {{ user.Region || 'æœªæä¾›' }}</p>
                                <div class="d-flex justify-content-center mb-2">
                                    <button class="btn btn-warning btn-sm rounded-circle" data-bs-toggle="modal"
                                        data-bs-target="#editProfileModal">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8 mb-4">
                        <div class="card discount-card">
                            <div class="card-body">
                                <h3 class="card-title text-center mb-3">è¨‚å–®å„ªæƒ </h3>
                                <div class="row align-items-center">
                                    <div class="col-5 text-center d-none d-md-block">
                                        <img v-if="user.Level === 10" src="images/mao/mao-discount01.png"
                                            alt="Discount Icon" class="discount-img">
                                        <img v-else-if="user.Level === 20" src="images/mao/mao-discount02.png"
                                            alt="Discount Icon" class="discount-img">
                                        <img v-else-if="user.Level === 30" src="images/mao/mao-discount03.png"
                                            alt="Discount Icon" class="discount-img">
                                        <img v-else-if="user.Level === 100" src="images/mao/mao-discount04.png"
                                            alt="Discount Icon" class="discount-img">
                                        <img v-else src="images/mao/mao-discount01.png" alt="Discount Icon"
                                            class="discount-img">
                                    </div>
                                    <div class="col-12 col-md-7">
                                        <div class="discount-content p-3 rounded" v-if="user.Level === 100">
                                            <p class="discount-title mb-2">ğŸ‰ <strong>ç®¡ç†å“¡å°ˆå±¬</strong></p>
                                            <p class="card-text mb-2"><i class="fas fa-gift me-1"></i> äº«æœ‰æ‰€æœ‰è¨‚å–®å…è²»</p>
                                            <p class="card-text mb-2"><i class="fas fa-headset me-1"></i> å°ˆå±¬å®¢æœå„ªå…ˆæœå‹™</p>
                                        </div>
                                        <div class="discount-content p-3 rounded" v-else-if="user.Level === 30">
                                            <p class="discount-title mb-2">ğŸ‰ <strong>VVIP æœƒå“¡</strong></p>
                                            <p class="card-text mb-2"><i class="fas fa-star me-1"></i> æ­·å²è¨‚å–®é” 20 æ¬¡å¾Œ</p>
                                            <p class="card-text mb-2"><i class="fas fa-tags me-1"></i> è¨‚å–®äº« 8 æŠ˜å„ªæƒ </p>
                                        </div>
                                        <div class="discount-content p-3 rounded" v-else-if="user.Level === 20">
                                            <p class="discount-title mb-2">ğŸ‰ <strong>VIP æœƒå“¡</strong></p>
                                            <p class="card-text mb-2"><i class="fas fa-star me-1"></i> æ­·å²è¨‚å–®é” 10 æ¬¡å¾Œ</p>
                                            <p class="card-text mb-2"><i class="fas fa-tags me-1"></i> è¨‚å–®äº« 9 æŠ˜å„ªæƒ </p>
                                        </div>
                                        <div class="discount-content p-3 rounded" v-else>
                                            <p class="discount-title mb-2">ğŸ‰ <strong>ä¸€èˆ¬æœƒå“¡</strong></p>
                                            <p class="card-text mb-2"><i class="fas fa-ticket-alt me-1"></i> å®Œæˆé¦–æ¬¡è¨‚å–®å¾Œ</p>
                                            <p class="card-text mb-2"><i class="fas fa-gift me-1"></i> è´ˆé€ 100 å…ƒå„ªæƒ åˆ¸</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-02">
                        <h1 class="modal-title fs-5 fw-900 tx-05" id="editProfileModalLabel">æœƒå“¡è³‡æ–™æ›´æ–°</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-6">
                                <div class="mb-3">
                                    <label for="level_edit" class="form-label">æœƒå“¡ç­‰ç´š</label>
                                    <select class="form-select text-center" id="level_edit" v-model="user.Level"
                                        disabled>
                                        <option value="10">ä¸€èˆ¬æœƒå“¡</option>
                                        <option value="20">VIP æœƒå“¡</option>
                                        <option value="30">VVIP æœƒå“¡</option>
                                        <option value="100">ç®¡ç†å“¡</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="username_edit" class="form-label">å¸³è™Ÿ</label>
                                    <input type="text" class="form-control" id="username_edit" v-model="user.Username"
                                        :class="{ 'is-valid': updateUsernameValid === true, 'is-invalid': updateUsernameValid === false }">
                                    <div class="valid-feedback" v-if="updateUsernameValid === true">ç¬¦åˆè¦å®š</div>
                                    <div class="invalid-feedback" v-if="updateUsernameValid === false">{{
                                        updateUsernameMessage }}</div>
                                </div>
                                <div class="mb-3">
                                    <label for="email_edit" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email_edit" v-model="user.Email"
                                        :class="{ 'is-valid': updateEmailValid === true, 'is-invalid': updateEmailValid === false }">
                                    <div class="valid-feedback" v-if="updateEmailValid === true">ç¬¦åˆè¦å®š</div>
                                    <div class="invalid-feedback" v-if="updateEmailValid === false">è«‹è¼¸å…¥æœ‰æ•ˆ Email</div>
                                </div>
                                <div class="mb-3">
                                    <label for="mycity_edit" class="form-label">å±…ä½åœ°</label>
                                    <select name="region" id="mycity_edit" class="form-select text-center"
                                        v-model="user.Region" required>
                                        <option value="" selected disabled>----é¸æ“‡ç¸£å¸‚åç¨±----</option>
                                        <option v-for="city in cityList" :key="city" :value="city">{{ city }}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="d-flex flex-column h-100">
                                    <div class="mb-3">
                                        <label for="photo_edit" class="form-label">å€‹äººé ­åƒ</label>
                                        <input type="file" class="form-control" id="photo_edit" accept="image/*"
                                            @change="previewImage">
                                        <div class="mt-3 text-center">
                                            <img v-if="imagePreview || user.Userphoto"
                                                :src="imagePreview || ('uploads/users/' + user.Userphoto + '?t=' + Date.now())"
                                                class="rounded-circle"
                                                style="width: 200px; height: 200px; object-fit: cover;">
                                            <div class="form-text" v-if="selectedFileName">{{ selectedFileName }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å–æ¶ˆ</button>
                        <button type="button" class="btn bg-02" @click="updateUser" :disabled="isUpdating">
                            <span v-if="isUpdating">æ›´æ–°ä¸­...</span>
                            <span v-else>ç¢ºèª</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <section id="order-history" class="py-5">
            <div class="container accordion-container">
                <h2 class="text-center mb-4 fw-bold">å€‹äººæ­·å²è¨‚å–®</h2>

                <div class="accordion" id="orderHistoryAccordion">
                    <div class="accordion-item" v-for="(order, index) in filteredOrders" :key="order.Order_id">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                :data-bs-target="'#collapseOrder' + index" :aria-controls="'collapseOrder' + index"
                                aria-expanded="false">
                                <i class="fa-solid fa-box feature-icon"></i>
                                è¨‚å–® #{{ order.Order_id }} - {{ formatDate(order.Created_at) }}
                                <span :class="getStatusBadgeClass(order.Status)">{{ order.Status }}</span>
                            </button>
                        </h2>
                        <div :id="'collapseOrder' + index" class="accordion-collapse collapse"
                            data-bs-parent="#orderHistoryAccordion">
                            <div class="accordion-body">
                                <div class="progress">
                                    <div :class="getProgressBarClass(order.Status)" role="progressbar"
                                        :style="'width: ' + getProgressWidth(order.Status) + '%'"></div>
                                </div>

                                <div class="order-summary">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <p><strong><i class="fas fa-money-bill-wave me-2"></i>ç¸½é‡‘é¡ï¼š</strong>{{
                                                order.Total_price }} å…ƒ</p>
                                            <p><strong><i class="fas fa-credit-card me-2"></i>ä»˜æ¬¾ç‹€æ…‹ï¼š</strong>
                                                <span :class="getPaymentStatusClass(order.Payment_status)">{{
                                                    order.Payment_status }}</span>
                                            </p>
                                        </div>
                                        <div class="col-md-6">
                                            <p><strong><i class="fas fa-map-marker-alt me-2"></i>é…é€åœ°å€ï¼š</strong>{{
                                                order.Shipping_address || 'æœªæä¾›' }}</p>
                                            <p><strong><i class="fas fa-phone me-2"></i>è¯çµ¡é›»è©±ï¼š</strong>{{
                                                order.Contact_phone || 'æœªæä¾›' }}</p>
                                        </div>
                                    </div>

                                    <div class="order-actions mt-3" v-if="order.Status === 'å·²ä¸‹å–®'">
                                        <button class="btn btn-danger btn-sm" @click="cancelOrder(order.Order_id)">
                                            <i class="fas fa-times-circle me-1"></i>å–æ¶ˆè¨‚å–®
                                        </button>
                                    </div>

                                    <h5 class="mt-4 mb-3"><i class="fas fa-list-alt me-2"></i>è¨‚å–®æ˜ç´°</h5>
                                    <div class="table-responsive">
                                        <table class="table table-hover table-sm">
                                            <thead class="table-light">
                                                <tr>
                                                    <th>å•†å“</th>
                                                    <th class="text-center">æ•¸é‡</th>
                                                    <th class="text-center">ç§Ÿè³ƒå¤©æ•¸</th>
                                                    <th class="text-end">å–®åƒ¹</th>
                                                    <th class="text-end">å°è¨ˆ</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="item in order.details" :key="item.Detail_id">
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <img :src="getProductImage(item.Product_id)" alt="å•†å“åœ–ç‰‡"
                                                                class="me-2"
                                                                style="width: 50px; height: 50px; object-fit: cover; border-radius: 5px;">
                                                            <div>{{ item.Product_name || 'æœªçŸ¥å•†å“' }}</div>
                                                        </div>
                                                    </td>
                                                    <td class="text-center">{{ item.Quantity }}</td>
                                                    <td class="text-center">{{ item.Rental_days }}</td>
                                                    <td class="text-end">{{ formatPrice(Math.round(item.Subtotal /
                                                        (item.Quantity * item.Rental_days))) }} å…ƒ/å¤©</td>
                                                    <td class="text-end">{{ formatPrice(item.Subtotal) }} å…ƒ</td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="4" class="text-end"><strong>å•†å“ç¸½é¡ï¼š</strong></td>
                                                    <td class="text-end"><strong>{{
                                                            formatPrice(calculateOrderSubtotal(order)) }} å…ƒ</strong>
                                                    </td>
                                                </tr>
                                                <tr v-if="order.Discount_applied > 0">
                                                    <td colspan="4" class="text-end text-success"><strong>æŠ˜æ‰£é‡‘é¡ï¼š</strong>
                                                    </td>
                                                    <td class="text-end text-success"><strong>-{{
                                                            formatPrice(order.Discount_applied) }} å…ƒ</strong></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4" class="text-end"><strong>æ‡‰ä»˜é‡‘é¡ï¼š</strong></td>
                                                    <td class="text-end"><strong>{{ formatPrice(order.Total_price) }}
                                                            å…ƒ</strong></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div v-if="filteredOrders.length === 0" class="text-center text-muted py-4">
                        <p>æ‚¨ç›®å‰æ²’æœ‰æ­·å²è¨‚å–®ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <button id="back-to-top" class="btn back-to-top" @click="scrollToTop">
            <i class="fas fa-chevron-up"></i>
        </button>

        <section id="footer">
            <footer class="modern-footer pt-5">
                <div class="container footer-content">
                    <div class="row g-4 mb-5">
                        <div class="col-lg-4 col-md-6">
                            <a href="#" class="footer-logo d-block mb-4">
                                æ¯›æ¯› MaoMao<span class="text-primary">.</span>
                            </a>
                            <p class="text-muted mb-4">æ¯›æ¯›è‡´åŠ›æ–¼ç‚ºæ‚¨çš„æ¯›å­©æä¾›é«˜å“è³ªçš„ç§Ÿè³ƒç”¨å“ï¼Œè®“æ¯éš»å¯µç‰©éƒ½èƒ½äº«å—èˆ’é©èˆ‡å¿«æ¨‚çš„ç”Ÿæ´»ã€‚æˆ‘å€‘ä»¥æ°¸çºŒç¶“ç‡Ÿç‚ºç›®æ¨™ï¼Œå‰µé€ é£¼ä¸»èˆ‡æ¯›å­©çš„å¹¸ç¦æ™‚å…‰ã€‚
                            </p>
                            <ul class="contact-info mb-4">
                                <li><i class="fas fa-map-marker-alt"></i><span>å°åŒ—å¸‚ä¸­å±±å€å—äº¬æ±è·¯ä¸‰æ®µ100è™Ÿ10æ¨“<br>Taipei,
                                        Taiwan</span></li>
                                <li><i class="fas fa-phone"></i><span>+886 (2) 1234-5678</span></li>
                                <li><i class="fas fa-envelope"></i><span><a
                                            href="mailto:service@maomao.com">service@maomao.com</a></span></li>
                            </ul>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <h3 class="footer-title">å¿«é€Ÿé€£çµ</h3>
                            <ul class="quick-links">
                                <li><a href="#s03">é¦–é </a></li>
                                <li><a href="#">é—œæ–¼æˆ‘å€‘</a></li>
                                <li><a href="#">å•†å“å±•ç¤º</a></li>
                                <li><a href="#">ç§Ÿè³ƒè¡¨å–®</a></li>
                                <li><a href="#">å¸¸è¦‹å•é¡Œèˆ‡å®¢æœ</a></li>
                                <li><a href="#">ç§Ÿè³ƒæ”¿ç­–</a></li>
                                <li><a href="#">éš±ç§æ¬Šæ”¿ç­–</a></li>
                                <li><a href="#">æœå‹™æ¢æ¬¾</a></li>
                            </ul>
                        </div>
                        <div class="col-lg-4 col-md-12">
                            <h3 class="footer-title">ä¿æŒè¯ç¹«</h3>
                            <p class="text-muted mb-4">è¨‚é–±æˆ‘å€‘çš„é›»å­å ±ï¼Œç²å–æœ€æ–°çš„å¯µç‰©ç”¨å“è³‡è¨Šèˆ‡å„ªæƒ æ´»å‹•ï¼</p>
                            <form class="mb-4">
                                <div class="mb-3">
                                    <input type="email" class="form-control newsletter-input" placeholder="è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶">
                                </div>
                                <button type="submit" class="btn btn-subscribe text-white w-100">ç«‹å³è¨‚é–±</button>
                            </form>
                            <div class="social-links">
                                <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                                <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                                <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                                <a href="#" class="social-icon"><i class="fab fa-line"></i></a>
                                <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div class="container">
                        <div class="row py-4">
                            <div class="col-md-6 text-center text-md-start">
                                <p>Â© 2025 æ¯›æ¯› MaoMao. ç‰ˆæ¬Šæ‰€æœ‰ã€‚</p>
                            </div>
                            <div class="col-md-6 text-center text-md-end">
                                <p>ç”± <a href="#">æ¯›æ¯›åœ˜éšŠ</a> å‚¾å¿ƒæ‰“é€  <i class="fas fa-heart text-danger"></i></p>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </section>
    </div>

    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
    <script src="https://unpkg.com/counterup2@2.0.2/dist/index.js">	</script>
    <script src="js/wow.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/mao-auth.js"></script>
    <script>
        const App = {
            data() {
                return {
                    orders: [], 
                    filteredOrders: [], 
                    products: [],
                    filteredProducts: [],
                    cartItems: [],
                    cityList: [],
                    selectedFileName: '',
                    imagePreview: null,
                    updateUsernameValid: null,
                    updateUsernameMessage: '',
                    updateEmailValid: null,
                    photoValid: null,
                    isUpdating: false,
                    originalUsername: '',
                    user: {
                        User_id: null,
                        Username: '',
                        Email: '',
                        Region: '',
                        Userphoto: '',
                        Level: null,
                        Uid01: ''
                    }
                };
            },
            mounted() {
                this.fetchProducts();
                this.loadCartFromStorage();
                this.loadUserFromStorage();
                this.loadCityList();
                this.fetchOrders(); 
                window.addEventListener('scroll', this.handleScroll);
            },
            beforeUnmount() {
                window.removeEventListener('scroll', this.handleScroll);
            },
            methods: {
                fetchProducts() {
                    fetch('mao-products-control-api_v1.php?action=getalldata') 
                        .then(response => response.json())
                        .then(data => {
                            if (data.state) {
                                this.products = data.data;
                                this.filteredProducts = this.products.filter(item => item.Pstatus === 'Y');
                            } else {
                                Swal.fire({
                                    title: 'ç„¡æ³•ç²å–å•†å“è³‡æ–™',
                                    text: data.message,
                                    icon: 'error'
                                });
                            }
                        })
                        .catch(error => {
                            Swal.fire({
                                title: 'ç„¡æ³•ç²å–å•†å“è³‡æ–™',
                                text: 'è«‹ç¨å¾Œå†è©¦',
                                icon: 'error'
                            });
                        });
                },
                increaseQuantity(item) {
                    item.quantity = (item.quantity || 1) + 1;
                },
                decreaseQuantity(item) {
                    if ((item.quantity || 1) > 1) {
                        item.quantity = (item.quantity || 1) - 1;
                    }
                },
                addToCart(item) {
                    const existingItem = this.cartItems.find(cartItem => cartItem.Product_id === item.Product_id);
                    if (!existingItem) {
                        this.cartItems.push({ ...item, quantity: 1 });
                        Swal.fire({
                            title: `${item.Pname} å·²åŠ å…¥è³¼ç‰©è»Š`,
                            icon: 'success',
                            timer: 1500,
                            showConfirmButton: false
                        });
                    } else {
                        Swal.fire({
                            title: `${item.Pname} å·²å­˜åœ¨æ–¼è³¼ç‰©è»Š`,
                            icon: 'info',
                            timer: 1500,
                            showConfirmButton: false
                        });
                    }
                },
                removeFromCart(productId) {
                    this.cartItems = this.cartItems.filter(item => item.Product_id !== productId);
                    Swal.fire({
                        title: 'å·²å¾è³¼ç‰©è»Šç§»é™¤',
                        icon: 'info',
                        timer: 1500,
                        showConfirmButton: false
                    });
                },
                loadCartFromStorage() {
                    const storedCart = localStorage.getItem('cartItems');
                    if (storedCart && getCookie("Uid01")) {
                        this.cartItems = JSON.parse(storedCart);
                    } else {
                        this.cartItems = [];
                    }
                },
                loadUserFromStorage() {
                    const storedUser = localStorage.getItem('user');
                    if (storedUser && getCookie("Uid01")) {
                        this.user = JSON.parse(storedUser);
                        this.user.User_id = String(this.user.User_id); 
                        this.originalUsername = this.user.Username;
                        this.updateUsernameValid = true;
                        this.updateUsernameMessage = "å¸³è™Ÿæœªè®Šæ›´";
                        this.updateEmailValid = this.user.Email && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.user.Email);
                        $("#s02_username_text").removeClass("d-none");
                        $("#s02_username_text").text(this.user.Username);
                        $("#s02_avatar_section").removeClass("d-none");
                        $("#s02_reg_btn").addClass("d-none");
                        $("#s02_login_btn").addClass("d-none");
                        $("#s02_logout_btn").removeClass("d-none");
                        $("#control_panel_btn").removeClass("d-none");
                        $("#s02_login_show").removeClass("d-none");
                    } else {
                        Swal.fire({
                            title: "è«‹å…ˆç™»å…¥",
                            text: "æ‚¨å°šæœªç™»å…¥ï¼Œè«‹ç™»å…¥å¾ŒæŸ¥çœ‹å€‹äººè³‡æ–™",
                            icon: "warning",
                            confirmButtonText: "å‰å¾€ç™»å…¥"
                        }).then(() => {
                            window.location.href = 'Mao-index_v1.html';
                        });
                    }
                },
                loadCityList() {
                    $.ajax({
                        type: "GET",
                        url: "js/CityCountyData.json",
                        dataType: "json",
                        success: (data) => {
                            this.cityList = data.map(item => item.CityName);
                        },
                        error: function () {
                            Swal.fire({
                                title: "API ä»‹æ¥éŒ¯èª¤",
                                text: "ç„¡æ³•è¼‰å…¥ç¸£å¸‚è³‡æ–™",
                                icon: "error"
                            });
                        }
                    });
                },
                previewImage(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const validTypes = ['image/jpeg', 'image/png'];
                        this.photoValid = validTypes.includes(file.type);
                        if (this.photoValid) {
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                this.imagePreview = e.target.result;
                            };
                            reader.readAsDataURL(file);
                            this.user.PhotoFile = file;
                            this.selectedFileName = file.name;
                        } else {
                            this.imagePreview = null;
                            this.user.PhotoFile = null;
                            this.selectedFileName = '';
                            Swal.fire({
                                title: "ç„¡æ•ˆçš„åœ–ç‰‡æ ¼å¼",
                                text: "è«‹é¸æ“‡ JPEG æˆ– PNG æ ¼å¼çš„åœ–ç‰‡",
                                icon: "error"
                            });
                        }
                    } else {
                        this.photoValid = false;
                        this.user.PhotoFile = null;
                        this.selectedFileName = '';
                    }
                },
                updateUser() {
                    if (this.isUpdating) return;
                    this.isUpdating = true;

                    if (this.updateUsernameValid === false || this.updateEmailValid === false) {
                        Swal.fire({
                            title: "è«‹å¡«å¯«å®Œæ•´ä¸”æ­£ç¢ºçš„è³‡æ–™!",
                            icon: "warning"
                        });
                        this.isUpdating = false;
                        return;
                    }

                    if (this.user.Status !== 'Y' && this.user.Status !== 'N') {
                        this.user.Status = 'Y';
                    }

                    const formData = new FormData();
                    formData.append("user_id", this.user.User_id);
                    formData.append("username", this.user.Username);
                    formData.append("email", this.user.Email);
                    formData.append("region", this.user.Region);
                    formData.append("level", this.user.Level);
                    formData.append("status", this.user.Status);
                    if (this.user.PhotoFile && this.user.PhotoFile instanceof File) {
                        formData.append("photo", this.user.PhotoFile);
                    }

                    axios.post("mao-users-control-api_v1.php?action=update", formData, {
                        headers: { "Content-Type": "multipart/form-data" }
                    })
                        .then(response => {
                            if (response.data.state) {
                                this.user = { ...this.user, ...response.data.data };
                                localStorage.setItem('user', JSON.stringify(this.user));
                                Swal.fire({
                                    title: "æ›´æ–°æˆåŠŸ!",
                                    icon: "success"
                                }).then(() => {
                                    const modal = document.getElementById("editProfileModal");
                                    bootstrap.Modal.getInstance(modal).hide();
                                    this.isUpdating = false;
                                    this.imagePreview = null;
                                    this.selectedFileName = '';
                                    this.user.PhotoFile = null;
                                });
                            } else {
                                Swal.fire({
                                    title: "æ›´æ–°å¤±æ•—!",
                                    text: response.data.message,
                                    icon: "error"
                                });
                                this.isUpdating = false;
                            }
                        })
                        .catch(error => {
                            Swal.fire({
                                title: "ç™¼ç”ŸéŒ¯èª¤",
                                text: "è«‹ç¨å¾Œå†è©¦",
                                icon: "error"
                            });
                            this.isUpdating = false;
                        });
                },
                logout() {
                    setCookie("Uid01", "", 7);
                    localStorage.removeItem('user');
                    localStorage.removeItem('cartItems');
                    Swal.fire({
                        title: "å·²ç™»å‡º",
                        icon: "info",
                        timer: 1500,
                        showConfirmButton: false
                    }).then(() => {
                        window.location.href = 'Mao-index_v1.html';
                    });
                },
                getUserLevel(level) {
                    const levels = {
                        10: "ä¸€èˆ¬æœƒå“¡",
                        20: "VIP",
                        30: "VVIP",
                        100: "ç®¡ç†å“¡"
                    };
                    return levels[level] || "æœªçŸ¥ç­‰ç´š";
                },
                increaseQuantity(item) {
                    item.quantity = (item.quantity || 1) + 1;
                },
                decreaseQuantity(item) {
                    if ((item.quantity || 1) > 1) {
                        item.quantity = (item.quantity || 1) - 1;
                    }
                },
                removeFromCart(productId) {
                    this.cartItems = this.cartItems.filter(item => item.Product_id !== productId);
                    Swal.fire({
                        title: 'å·²å¾è³¼ç‰©è»Šç§»é™¤',
                        icon: 'info',
                        timer: 1500,
                        showConfirmButton: false
                    });
                },
                scrollToTop() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                },
                handleScroll() {
                    const backToTopButton = document.getElementById('back-to-top');
                    if (window.scrollY > 300) {
                        backToTopButton.classList.add('visible');
                    } else {
                        backToTopButton.classList.remove('visible');
                    }
                },
                fetchOrders() { 
                    axios.get('mao-orders-control-api_v1.php?action=getalldata')
                        .then(response => {
                            if (response.data.state) {
                                this.orders = response.data.data || [];
                                this.filterUserOrders();
                            } else {
                                Swal.fire({
                                    title: 'ç„¡æ³•ç²å–è¨‚å–®è³‡æ–™',
                                    text: response.data.message,
                                    icon: 'error'
                                });
                                this.orders = [];
                                this.filteredOrders = [];
                            }
                        })
                        .catch(error => {
                            Swal.fire({
                                title: 'ç„¡æ³•ç²å–è¨‚å–®è³‡æ–™',
                                text: 'è«‹æª¢æŸ¥ç¶²è·¯é€£ç·šæˆ–ç¨å¾Œå†è©¦',
                                icon: 'error'
                            });
                            this.orders = [];
                            this.filteredOrders = [];
                        });
                },

                filterUserOrders() {
                    if (this.user.User_id) {
                        this.filteredOrders = this.orders
                            .filter(order => String(order.User_id) === String(this.user.User_id)) 
                            .sort((a, b) => new Date(b.Created_at) - new Date(a.Created_at));
                    } else {
                        this.filteredOrders = [];
                    }
                },

                formatDate(dateString) {
                    const date = new Date(dateString);
                    return date.toLocaleDateString('zh-TW', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit'
                    });
                },

                getProductImage(productId) {
                    const product = this.products.find(p => p.Product_id === productId);
                    return product ? 'uploads/' + product.Photo : 'images/default-product.jpg';
                },
                calculateOrderTotal(order) {
                    if (!order.details || order.details.length === 0) return 0;
                    return order.details.reduce((total, item) => total + item.Subtotal, 0);
                },
                calculateOrderSubtotal(order) {
                    if (!order.details || order.details.length === 0) return 0;

                    return order.details.reduce((total, item) => {
                        const subtotal = Number(item.Subtotal) || 0;
                        return total + subtotal;
                    }, 0);
                },

                formatPrice(price) {
                    const num = Number(price);
                    return num.toLocaleString('zh-TW', { maximumFractionDigits: 0 });
                },
                getStatusBadgeClass(status) {
                    switch (status) {
                        case 'å·²å®Œæˆ': return 'badge bg-05 tx-03 badge-custom';
                        case 'å·²å‡ºè²¨': return 'badge bg-04 tx-02 badge-custom';
                        case 'å·²ä¸‹å–®': return 'badge bg-03 tx-05 badge-custom';
                        case 'å·²å–æ¶ˆ': return 'badge bg-secondary text-light badge-custom';
                        default: return 'badge badge-custom';
                    }
                },

                getProgressBarClass(status) {
                    switch (status) {
                        case 'å·²å®Œæˆ': return 'progress-bar bg-05';
                        case 'å·²å‡ºè²¨': return 'progress-bar bg-04';
                        case 'å·²ä¸‹å–®': return 'progress-bar bg-03';
                        case 'å·²å–æ¶ˆ': return 'progress-bar bg-secondary';
                        default: return 'progress-bar bg-info';
                    }
                },

                getProgressWidth(status) {
                    switch (status) {
                        case 'å·²å®Œæˆ':
                            return 100;
                        case 'å·²å‡ºè²¨':
                            return 75;
                        case 'å·²ä¸‹å–®':
                            return 25;
                        case 'å·²å–æ¶ˆ':
                            return 0;
                        default:
                            return 0;
                    }
                },
                getItemStatusIcon(status) {
                    switch (status) {
                        case 'completed':
                            return 'fa-solid fa-check-circle text-success status-icon';
                        case 'processing':
                            return 'fa-solid fa-spinner fa-spin text-primary status-icon';
                        case 'pending':
                            return 'fa-solid fa-clock text-secondary status-icon';
                        default:
                            return 'fa-solid fa-clock text-secondary status-icon';
                    }
                },
                cancelOrder(orderId) {
                    Swal.fire({
                        title: 'ç¢ºå®šè¦å–æ¶ˆæ­¤è¨‚å–®å—ï¼Ÿ',
                        text: "æ­¤æ“ä½œç„¡æ³•å¾©åŸï¼",
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#d33',
                        cancelButtonColor: '#3085d6',
                        confirmButtonText: 'ç¢ºå®šå–æ¶ˆ',
                        cancelButtonText: 'è¿”å›'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            const currentTime = new Date().toISOString().slice(0, 19).replace('T', ' ');
                            axios.post('mao-orders-control-api_v1.php?action=update', {
                                order_id: orderId,
                                status: 'å·²å–æ¶ˆ',
                                role: 'user',
                                updated_at: currentTime
                            })
                                .then(response => {
                                    if (response.data.state) {
                                        Swal.fire('å·²å–æ¶ˆ!', 'æ‚¨çš„è¨‚å–®å·²æˆåŠŸå–æ¶ˆã€‚', 'success').then(() => {
                                            this.fetchOrders();
                                        });
                                    } else {
                                        Swal.fire('å–æ¶ˆå¤±æ•—!', response.data.message, 'error');
                                    }
                                })
                                .catch(error => {
                                    Swal.fire('éŒ¯èª¤!', 'å–æ¶ˆè¨‚å–®æ™‚ç™¼ç”ŸéŒ¯èª¤: ' + error.message, 'error');
                                });
                        }
                    });
                },
                getPaymentStatusClass(status) {
                    switch (status) {
                        case 'å·²ä»˜æ¬¾': return 'text-success';
                        case 'å¾…ä»˜æ¬¾': return 'text-warning';
                        case 'ä»˜æ¬¾å¤±æ•—': return 'text-danger';
                        default: return '';
                    }
                }
            },
            watch: {
                'user.Username': function (newValue) {
                    const vm = this;
                    if (newValue === vm.originalUsername) {
                        vm.updateUsernameValid = true;
                        vm.updateUsernameMessage = "å¸³è™Ÿæœªè®Šæ›´";
                        return;
                    }
                    if (newValue.length > 2 && newValue.length < 9) {
                        axios.get(`mao-users-control-api_v1.php?action=checkuni_update&username=${encodeURIComponent(newValue)}&user_id=${encodeURIComponent(vm.user.User_id)}`)
                            .then(response => {
                                vm.updateUsernameValid = response.data.state;
                                vm.updateUsernameMessage = response.data.message;
                            })
                            .catch(error => {
                                vm.updateUsernameValid = false;
                                vm.updateUsernameMessage = "æª¢æŸ¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦";
                            });
                    } else {
                        vm.updateUsernameValid = false;
                        vm.updateUsernameMessage = "å¸³è™Ÿéœ€ç‚º 3-8 å­—";
                    }
                },
                'user.Email': function (newValue) {
                    const vm = this;
                    vm.updateEmailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(newValue);
                },
                cartItems: {
                    handler(newCart) {
                        if (getCookie("Uid01")) {
                            localStorage.setItem('cartItems', JSON.stringify(newCart));
                        }
                    },
                    deep: true
                },
                'user.User_id': function () {
                    this.filterUserOrders();
                },
                orders: function () {
                    this.filterUserOrders(); 
                },
            }
        };

        Vue.createApp(App).mount('#app');

        function setCookie(cname, cvalue, exdays) {
            const d = new Date();
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
            let expires = "expires=" + d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        function getCookie(cname) {
            let name = cname + "=";
            let ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }
    </script>
    <script>
        (function () {
            function c() {
                var b = a.contentDocument || a.contentWindow.document;
                if (b) {
                    var d = b.createElement('script');
                    d.innerHTML = "window.__CF$cv$params={r:'9277aedffc7a1d7a',t:'MTc0MzE3MDczNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
                    b.getElementsByTagName('head')[0].appendChild(d)
                }
            }
            if (document.body) {
                var a = document.createElement('iframe');
                a.height = 1;
                a.width = 1;
                a.style.position = 'absolute';
                a.style.top = 0;
                a.style.left = 0;
                a.style.border = 'none';
                a.style.visibility = 'hidden';
                document.body.appendChild(a);
                if ('loading' !== document.readyState) c();
                else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c);
                else {
                    var e = document.onreadystatechange || function () { };
                    document.onreadystatechange = function (b) {
                        e(b);
                        'loading' !== document.readyState && (document.onreadystatechange = e, c())
                    }
                }
            }
        })();
    </script>
</body>

</html>